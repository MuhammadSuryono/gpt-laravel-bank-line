!function($){var t=0,e=-1,n={},i=0,o=5,a,s,c,r,l=!1,h=!1;$.fn.sectionScroll=function(n){function i(){a.find(".section-area-inner").on("mousewheel",function(e){if(Foundation.MediaQuery.atLeast("medium")){var i=$(this).offset().top,s=$(window).height()-$(this).height(),c=e.deltaY;if(c<0?c=1:c>0&&(c=-1),c!=$(this)[0].last_delta&&($(this)[0].count_scroll=0),i>=0||i<=s?$(this)[0].count_scroll+=1:$(this)[0].count_scroll=0,$(this)[0].last_delta=c,$(this)[0].count_scroll>o)return a.find(".section-area-inner").off("mousewheel"),$(this)[0].count_scroll=0,$(this)[0].last_delta=0,h?n.onBeforeSlide(t):f(c),!1;var r=$(this);setTimeout(function(){$(r)[0].count_scroll=0},500)}})}function u(){mcustom=a.find(".section-area").niceScroll(),a.find(".section-area").scroll(function(){if($(this).getNiceScroll(0).cursorheight>0){var e=$(this).getNiceScroll(0).getScrollTop(),i=$(this).getNiceScroll(0).getContentSize();i=Math.abs(i.h)-a.height(),l||n.onSectionScroll(t,e,i)}})}function f(o){if(l=!0,1==o&&t==a.find(".section-area").length-1)return e=t,i(),!1;if(o==-1&&0==t)return S(),!1;if(a.find("#section-inner").length>0){var s=0;t+=o,t<=0?t=0:t>=a.find(".section-area").length-1&&(t=a.find(".section-area").length-1),$.each(a.find(".section-area"),function(n,i){$(this).find(".animation").removeClass("active"),$(this).find(".first-animation").removeClass("active"),n!=e&&$(this).getNiceScroll(0).doScrollTop(0,0),n<t&&(s+=parseInt($(this).css("height")))});var r=$(a.find(".section-area")[t]),h=r.attr("data-slug");h||(h=""),c.push(h,h),n.onStartSlide(t,e),TweenMax.to(a.find("#section-inner"),.5,{top:0-s,ease:Power2.easeInOut,delay:.3,onComplete:function(){setTimeout(function(){S()},500),g(),l=!1,n.onSlideFinished(t,e),m(),r.getNiceScroll(0).doScrollTop(1,0)}})}}function d(){var e=$(a.find(".section-area")[t]);e.find(".first-animation").addClass("active")}function g(){var e=$(a.find(".section-area")[t]);e.find(".animation").addClass("active")}function m(){h2=$(window).height(),$("body,html,.wrapper").css({height:$(window).height()}),a.find(".section-area").css({height:h2}),a.css({height:h2}),a.find(".section-area-inner").css({"min-height":h2});var e=0;a.find(".section-area").getNiceScroll().resize(),Foundation.MediaQuery.atLeast("medium")?($.each(a.find(".section-area"),function(n,i){n<t&&(e+=parseInt($(this).css("height")))}),TweenMax.to($("#section-inner"),0,{top:0-e,ease:Power2.easeOut})):mcustom=null}function S(){e=t,i()}var p={wrapper:"",base_url:"",onBeforeSlide:function(){},onSlideFinished:function(){},onStartSlide:function(){},onSectionScroll:function(){},getPopState:function(){},slideScroll:function(t){}},n;n=$.extend(p,n),a=this,s=p.wrapper,r=p.base_url,h=p.manual_slide,mcustom=null,$(document).ready(function(){$("body,html").css("overflow","hidden"),u(),$(window).resize(function(){m()}),m(),$.each(a.find(".section-area-inner"),function(){$(this)[0].last_delta=0,$(this)[0].count_scroll=0}),i(),""!=r?c=$(document).pushstate({base_url:r,onPop:function(t){t=t[0];var e=0;""!=t&&$.each(a.find(".section-area"),function(n){if($(this).attr("data-slug")==t)return e=n,!1}),n.getPopState(t,e),f(e)}}):f(0)});var v={slideTo:function(t){f(t)}};return v;return this}}(jQuery);